<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EscarolaOS - Testing Phase</title>
    <style>
        :root {
            --verde-bosque: #1b3022;
            --terracota: #b0413e;
            --cantera: #d9d4c7;
            --dorado: #d4af37;
            --negro: #0a0a0a;
            --tarjeta: #1a1a1a;
            --texto: #f5f5f5;
            --font-main: 'Segoe UI', sans-serif; /* Aqu√≠ podr√°s cambiar la tipograf√≠a despu√©s */
        }

        body {
            font-family: var(--font-main);
            background-color: var(--negro);
            color: var(--texto);
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- LOGIN SCREEN --- */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--negro); display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 2000;
        }

        /* --- NAVEGACI√ìN POR PESTA√ëAS (TABS) --- */
        .tab-bar {
            position: fixed; bottom: 0; width: 100%; max-width: 600px;
            background: var(--verde-bosque); display: none;
            grid-template-columns: repeat(5, 1fr);
            border-top: 2px solid var(--dorado); z-index: 1000;
        }

        .tab-item {
            padding: 15px 5px; text-align: center; font-size: 0.7rem;
            color: var(--cantera); cursor: pointer; opacity: 0.6;
        }

        .tab-item.active { opacity: 1; color: var(--dorado); font-weight: bold; }

        /* --- CONTENEDORES --- */
        .container {
            width: 100%; max-width: 600px; padding: 20px;
            padding-bottom: 100px; box-sizing: border-box; display: none;
        }

        .card {
            background: var(--tarjeta); border-radius: 12px;
            padding: 20px; margin-bottom: 20px;
            border-left: 4px solid var(--dorado);
        }

        /* --- ESTILOS COMUNES --- */
        h1, h2, h3 { color: var(--dorado); margin-top: 0; }
        input, select {
            width: 100%; padding: 12px; margin: 10px 0;
            background: #000; border: 1px solid var(--verde-bosque);
            color: white; border-radius: 8px;
        }
        button {
            width: 100%; padding: 12px; border-radius: 8px; border: none;
            font-weight: bold; cursor: pointer;
        }
        .btn-gold { background: var(--dorado); color: black; }
        .btn-verde { background: var(--verde-bosque); color: var(--cantera); }

        /* PINPAD DOTS */
        .pin-dots { display: flex; gap: 15px; margin: 20px 0; }
        .dot { width: 15px; height: 15px; border: 2px solid var(--dorado); border-radius: 50%; }
        .dot.filled { background: var(--dorado); }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="letter-spacing: 5px;">ESCAROLA<span style="color:var(--cantera)">OS</span></h1>
        <div class="pin-dots">
            <div class="dot" id="dot-0"></div><div class="dot" id="dot-1"></div>
            <div class="dot" id="dot-2"></div><div class="dot" id="dot-3"></div>
        </div>
        <div id="pinpad" style="display: grid; grid-template-columns: repeat(3, 80px); gap: 15px;">
            <button onclick="tecleo('1')" style="height:80px; border-radius:50%; background:rgba(255,255,255,0.05); color:white; font-size:1.5rem;">1</button>
            <button onclick="tecleo('2')" style="height:80px; border-radius:50%; background:rgba(255,255,255,0.05); color:white; font-size:1.5rem;">2</button>
            <button onclick="tecleo('3')" style="height:80px; border-radius:50%; background:rgba(255,255,255,0.05); color:white; font-size:1.5rem;">3</button>
            </div>
    </div>

    <div class="tab-bar" id="main-nav">
        <div class="tab-item active" onclick="showTab('finanzas')">üí∞ Finanzas</div>
        <div class="tab-item" onclick="showTab('tareas')">‚úÖ Tareas</div>
        <div class="tab-item" onclick="showTab('reloj')">üïí Reloj</div>
        <div class="tab-item" onclick="showTab('recetas')">üìñ Recetas</div>
        <div class="tab-item" onclick="showTab('admin')">‚öôÔ∏è Admin</div>
    </div>

    <div id="finanzas" class="container">
        <h1>Tablero Financiero</h1>
        <div class="card">
            <p>Utilidad Neta</p>
            <h2 id="val-utilidad" style="font-size: 2.5rem;">$0.00</h2>
        </div>
        </div>

    <div id="tareas" class="container">
        <h1>Checklist de Limpieza</h1>
        <div id="lista-tareas"></div>
    </div>

    <div id="reloj" class="container">
        <h1>Reloj Checador</h1>
        <div class="card">
            <button class="btn-gold">MARCAR ENTRADA</button>
        </div>
    </div>

    <div id="recetas" class="container">
        <h1>Recetario & Costeo</h1>
        </div>

    <div id="admin" class="container">
        <h1>Configuraci√≥n</h1>
        </div>

    <script type="module">
        import { db, collection, addDoc, getDocs, query, where, doc, deleteDoc } from './firebase-config.js';

        let pinIngresado = "";

        window.tecleo = (n) => {
            if(pinIngresado.length < 4) {
                pinIngresado += n;
                updateDots();
                if(pinIngresado.length === 4) setTimeout(verificarAcceso, 200);
            }
        };

        window.showTab = (tabId) => {
            document.querySelectorAll('.container').forEach(c => c.style.display = 'none');
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).style.display = 'block';
            event.currentTarget.classList.add('active');
        };

        async function verificarAcceso() {
            // L√≥gica de Firebase para validar PIN
            // Si es correcto:
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-nav').style.display = 'grid';
            showTab('finanzas');
        }

        function updateDots() {
            for(let i=0; i<4; i++) {
                document.getElementById(`dot-${i}`).classList.toggle('filled', i < pinIngresado.length);
            }
        }
    </script>
</body>
</html>
